/****************************** 웹브라우져는 웹버젼으로 이동 ******************************/
var zGst_DomainName = "http://inquiry.motioneye.co.kr/".toLowerCase();
var zGst_DomainName2 = "https://inquiry.motioneye.co.kr/".toLowerCase();
var zGst_DomainName3 = "https://start.theborn.co.kr/".toLowerCase();
var uAgent = navigator.userAgent.toLowerCase();
var jumpUrl = window.location.href;
var tempParams = window.location.search;
var tempHash = window.location.hash;

//해쉬부분 삭제
jumpUrl = jumpUrl.replace(tempHash,"");
// 파라메터 부분 삭제 
jumpUrl = jumpUrl.replace(tempParams,"");

//uri 체크
jumpUrl = jumpUrl.toLowerCase();
jumpUrl = jumpUrl.replace(zGst_DomainName,"");
jumpUrl = jumpUrl.replace(zGst_DomainName2,"");
jumpUrl = jumpUrl.replace(zGst_DomainName3,"");
//jumpUrl = jumpUrl.replace("/m/","");

if (uAgent.match(/ipad/) == null && uAgent.match(/iphone|mobile|up.browser|android|blackberry|windows ce|nokia|webos|opera mini|sonyericsson|opera mobi|windows phone|iemobile|polaris/) != null){
	var mBrowser = true;
	jumpUrl = "/m/"+jumpUrl+tempParams + tempHash;
	window.location.href = jumpUrl;
	// document.write("<meta http-equiv='refresh' content='0;url="+jumpUrl+"'>");
}else{
	var mBrowser = false;
}
/******************************************************************************************/

$(function(){
	//메인에서 작동 S
	if($('#container.main').length >= 1){
		var mainSwiper = new Swiper('.main-slider-wrap .main-slider', {
			loop: true,
			autoplay: true,
			centeredSlides: true,
			slidesPerView: 'auto',
			spaceBetween : 0,
			navigation: {
				nextEl: '.main-slider-wrap .swiper-next',
				prevEl: '.main-slider-wrap .swiper-prev',
				clickable: true,
			},
			// 210310 추가 Start
			pagination: {
				el: '.main-slider-wrap .swiper-pagination',
				clickable: true,
			}
			// 210310 추가 End
		});
		var middleSwiper = new Swiper('.middle-slider-wrap .middle-slider', {
			loop: true,
			autoplay: true,
			centeredSlides: true,
			slidesPerView: 'auto',
			spaceBetween : 0,
			pagination: {
				el: '.middle-slider-wrap .swiper-pagination',
				clickable: true,
			}  
		});
		// 210310 추가 Start
		// 3보다 작을 때로 조건을 준 이유는 .swiper-slide가 1개일 경우,
		// 여기에 더해서 .swiper-slide-prev와 .swiper-slide-next가 자동으로 생성되어 총 3개라서
		if(3 >= $(".middle-slider .swiper-slide").length){
			$(".middle-slider").addClass("swiper-no-swiping");
			middleSwiper.autoplay.stop();
			$(".swiper-switch-btns").hide();
		}else{
			$('.middle-slider-wrap .swiper-switch-btns').click(function(){
				if(!$(this).hasClass('paused')){
					middleSwiper.autoplay.stop();
					$(this).addClass('paused');
				}else{
					middleSwiper.autoplay.start();
					$(this).removeClass('paused');
				}
			});
		}
		// 210310 추가 End
		
		var storySwiper = new Swiper('.story-slider-wrap .story-slider', {
			loop: false,
			centeredSlides: false,
			slidesPerView: 'auto',
			spaceBetween : 28,
			navigation: {
				nextEl: '.story-slider-wrap .swiper-next',
				prevEl: '.story-slider-wrap .swiper-prev',
				clickable: true,
			},
		});
	}
	//메인에서 작동 E
});
$(document).ready(function(){
	//상단 마우스 오버
	$('header > div .header-right ul li').on('mouseover',function(){
		$('header > div .header-right ul').addClass('hover');
	});
	$('header > div .header-right ul li').on('mouseout',function(){
		$('header > div .header-right ul').removeClass('hover');
	});

	//탭기능
	if($('.tab-area').length >= 1){
		var tabArea = $('.tab-area');
		tabArea.find('.tab-btns a').each(function(i,v){
			var btnIndex = i;
			$(this).on('click',function(){
				if(!$(this).hasClass('on')){
					tabArea.find('.tab-btns a').removeClass('on');
					$(this).addClass('on');
					tabArea.find('.tab-con').removeClass('on');
					tabArea.find('.tab-con').eq(btnIndex).addClass('on');
				}
			});
		});
		//url 체크 후 탭 활성화
		var nowUrl = document.location.href;
		if(nowUrl.indexOf('tabindex=') != -1 && nowUrl.indexOf('indexnum') != -1){
			var tabIndexNum = nowUrl.split('tabindex=')[1];
			tabIndexNum = tabIndexNum.split('indexnum')[0];
			tabIndexNum = Number(tabIndexNum);
			tabArea.find('.tab-btns a').eq(tabIndexNum).click();
		}
	}

	//탭 찾아가기	
	/* if($('.move-btns').length >= 1){
		$('.move-btns a').each(function(i,v){
			var btnInext = i,
			 para_1 = 'tabindex=',
			 para_2 = 'indexnum',
			 nowHref = $(this).attr('href');
			if(nowHref){
				if(nowHref.indexOf(para_1) == -1 && nowHref.indexOf(para_2) == -1){
					if(nowHref.indexOf('?') != -1){
						$(this).attr('href',nowHref + '&' + para_1 + btnInext + para_2);
					}else{
						$(this).attr('href',nowHref + '?' + para_1 + btnInext + para_2);
					}
				}
			}
		});
	} */

	//셀렉트박스
	if($('.selectBox').length >= 1){
		$('.selectBox').each(function(){
			var selectBox = $(this),
			 targetSelect = selectBox.find('select'),
			 targetLabel = targetSelect.next('label');
			targetSelect.on('change',function(){
				var newValue = $(this).find('option:selected').text();
				targetLabel.text(newValue); 
			});
		});
	}
	//토글박스
	if($('.toggleWrap').length >= 1){
		$('.toggleWrap').each(function(){
			var toggleWrap = $(this),
			 toggleBtns = toggleWrap.find('.toggleBtns');
			toggleBtns.on('click',function(){
				var toggleParent = $(this).parent('.toggleEach');
				if(!toggleParent.hasClass('toggleActive')){
					toggleWrap.find('.toggleActive .toggleBox').stop().slideUp();
					toggleWrap.find('.toggleEach').removeClass('toggleActive');
					toggleParent.find('.toggleBox').stop().slideDown();
					toggleParent.addClass('toggleActive');
					
					var  qnaidx = toggleParent.attr("item-data");
					$.ajax({
						url: '/lib/faqcount.php',
						type: 'GET',
						data: { 'idx': qnaidx, 'path': "w" },
						success: function (data) {
						   //  console.log('snscntchk=' + data);
						},
						error: function (xhr) {
							// alert('Error');
						}
					}); 
				}else{
					toggleParent.find('.toggleBox').stop().slideUp();
					toggleParent.removeClass('toggleActive');
				}
			});
		});
	}

	//add탭기능
	function tabInSlider(targetClass){
		var targetClass = '.' + targetClass;
		var presentationSwiper = new Swiper(targetClass + ' .presentation-lists .swiper-container', {
			loop: false,
			autoplay: false,
			autoHeight: true,
			centeredSlides: true,
			spaceBetween : 0,
			navigation: {
				nextEl: targetClass + ' .date-set-btn-next',
				prevEl: targetClass + ' .date-set-btn-prev',
				clickable: true,
			},
			  on : {
				 slideChangeTransitionEnd: function(){
					//console.log($(targetClass).find('.presentation-year').text());
					//console.log($(targetClass).find('.presentation-month').text());
				 }
			  },
		});
	}	

	if($('.add-tab').length >= 1){
		$('.add-tab').each(function(){
			var addTab = $(this);
			addTab.find('.add-tab-btns > div').each(function(i,v){
				var btnIndex = i;
				if(btnIndex == 0){
					addTab.find('.add-tab-btns > div').removeClass('on');
					$(this).addClass('on');
					addTab.find('.add-tab-con').removeClass('on');
					addTab.find('.add-tab-con').eq(btnIndex).addClass('on');
					if(!addTab.find('.add-tab-con').eq(btnIndex).hasClass('sliderActive')){
						var addConArea = addTab.find('.add-tab-con').eq(btnIndex);
						if(addConArea.find('.tabInSlider').length >= 1){
							var newClass = 'tabInSlider' + btnIndex;
							addConArea.addClass(newClass);
							//tabInSlider(newClass);
							addConArea.addClass('sliderActive');
						}
					}
				}
				$(this).on('click',function(){
					if(!$(this).hasClass('on')){
						addTab.find('.add-tab-btns > div').removeClass('on');
						$(this).addClass('on');
						addTab.find('.add-tab-con').removeClass('on');
						addTab.find('.add-tab-con').eq(btnIndex).addClass('on');
						if(!addTab.find('.add-tab-con').eq(btnIndex).hasClass('sliderActive')){
							var addConArea = addTab.find('.add-tab-con').eq(btnIndex);
							if(addConArea.find('.tabInSlider').length >= 1){
								var newClass = 'tabInSlider' + btnIndex;
								addConArea.addClass(newClass);
								// tabInSlider(newClass);
								addConArea.addClass('sliderActive');
							}
						}
					}
				});
			});
		});
	}
});
	
$(window).on('load',function(){
});

$(window).scroll(function(){
});

$(window).on('resize',function(){
});







